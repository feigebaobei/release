<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>structure</title>
  <!-- <link rel="stylesheet" href="../style/bootstrap.css"> -->
  <!-- <link rel="stylesheet" href="../style/bootstrap.4.0.css"> -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/open-iconic@1.1.1/font/css/open-iconic-bootstrap.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-table@1.12.1/src/bootstrap-table.css">
  <link rel="stylesheet" href="../style/common.css">
  <!-- 每个页面相应的样式 start -->
  <!-- <link rel="stylesheet" href="../style/app.css"> -->
  <link rel="stylesheet" href="../style/queueAudit.css">
  <!-- 每个页面相应的样式 end -->
  <script src="../script/jquery.min.js"></script>
  <!-- <script src="../script/popper.js"></script> -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/esm/popper.js"></script> -->
  <!-- <script src="https://cdn.bootcss.com/popper.js/1.12.9/popper.js"></script> -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script> -->
  <script src="../script/popper.1.12.9.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap-table@1.12.1/src/bootstrap-table.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap-table@1.12.1/dist/locale/bootstrap-table-zh-CN.js"></script>
  <script>
    $(document).ready(function () {
      var layerMsg = function (o) {
        /*o = {
          message: 'string',
          statusNumber: number,
          time: number
        }*/
        laery.msg(
          o.message || '失败', 
          {
            icon: o.statusNumber || 2,
            time: o.time || 800
          }
        )
      }
      var table = {
        init: function ($table, tableParams) {
          $table.bootstrapTable(tableParams)
        },
        refreshData: function ($table, ajaxParams) {
          $.ajax({
            url: ajaxParams.url,
            type: ajaxParams.type,
            data: ajaxParams.data,
            success: function (response) {
              if (!response.status) {
                $table.bootstrapTable('refreshOptions', {
                  data: response.data
                })
              } else {
                layerMsg({
                  message: '数据刷新失败',
                  statusNumber: 2,
                  time: 800
                })
              }
            },
            error: function (error) {
              layerMsg({
                message: '数据刷新失败',
                statusNumber: 2,
                time: 800
              })
            }
          })
        }
      }

      // table 的假数据 start
      var dataVhostTable = [
        {
          appName: 'appName',
          appId: 'appId',
          createTime: 'createTime',
          status: "状态"
        },
        {
          appName: 'appName',
          appId: 'appId',
          createTime: 'createTime',
          status: "状态"
        },
        {
          appName: 'appName',
          appId: 'appId',
          createTime: 'createTime',
          status: "状态"
        },
        {
          appName: 'appName',
          appId: 'appId',
          createTime: 'createTime',
          status: "状态"
        },
        {
          appName: 'appName',
          appId: 'appId',
          createTime: 'createTime',
          status: "状态"
        }
      ]
      var dataTopicTable = [
        {
          appName: 'appName',
          appId: 'appId',
          type: '新的资源',
          createTime: 'createTime',
          status: "状态"
        },
        {
          appName: 'appName',
          appId: 'appId',
          type: '新的资源',
          createTime: 'createTime',
          status: "状态"
        },
        {
          appName: 'appName',
          appId: 'appId',
          type: '新的资源',
          createTime: 'createTime',
          status: "状态"
        },
        {
          appName: 'appName',
          appId: 'appId',
          type: '新的资源',
          createTime: 'createTime',
          status: "状态"
        },
        {
          appName: 'appName',
          appId: 'appId',
          type: '新的资源',
          createTime: 'createTime',
          status: "状态"
        }
      ]
      var dataDataMoveTable = [
        {
          originApp: 'originApp',
          originVhost: 'originVhost',
          origin: 'origin',
          goalApp: 'goalApp',
          goalVhost: 'goalVhost',
          goal: 'goal',
          status: "状态"
        },
        {
          originApp: 'originApp',
          originVhost: 'originVhost',
          origin: 'origin',
          goalApp: 'goalApp',
          goalVhost: 'goalVhost',
          goal: 'goal',
          status: "状态"
        },
        {
          originApp: 'originApp',
          originVhost: 'originVhost',
          origin: 'origin',
          goalApp: 'goalApp',
          goalVhost: 'goalVhost',
          goal: 'goal',
          status: "状态"
        },
        {
          originApp: 'originApp',
          originVhost: 'originVhost',
          origin: 'origin',
          goalApp: 'goalApp',
          goalVhost: 'goalVhost',
          goal: 'goal',
          status: "状态"
        },
        {
          originApp: 'originApp',
          originVhost: 'originVhost',
          origin: 'origin',
          goalApp: 'goalApp',
          goalVhost: 'goalVhost',
          goal: 'goal',
          status: "状态"
        },
      ]
      // table 的假数据 end
      // table init
      var vhostTableColumns = [
        {
          title: '应用名称',
          field: 'appName'
        },
        {
          title: '应用ID',
          field: 'appId'
        },
        {
          title: '创建时间',
          field: 'createTime'
        },
        {
          title: '状态',
          field: 'status'
        },
        {
          title: '操作',
          field: ''
        }
      ]
      var topicTableColumns = [
        {
          title: '应用名称',
          field: 'appName'
        },
        {
          title: '应用ID',
          field: 'appId'
        },
        {
          title: '申请类型',
          field: 'type'
        },
        {
          title: '创建时间',
          field: 'createTime'
        },
        {
          title: '状态',
          field: 'status'
        },
        {
          title: '操作',
          field: ''
        }
      ]
      var dataMoveTableColumns = [
        {
          title: '源应用',
          field: 'originApp'
        },
        {
          title: '源Vhost',
          field: 'originVhost'
        },
        {
          title: '源',
          field: 'origin'
        },
        {
          title: '目标应用',
          field: 'goalApp'
        },
        {
          title: '目标Vhost',
          field: 'goalVhost'
        },
        {
          title: '目标',
          field: 'goal'
        },
        {
          title: '状态',
          field: 'status'
        },
        {
          title: '操作',
          field: ''
        },
      ]
      table.init($('#vhostTable'), {
        data: dataVhostTable,
        search: true,
        searchAlign: 'left',
        pagination: true,
        columns: vhostTableColumns
      })
      table.init($('#topicTable'), {
        data: dataTopicTable,
        search: true,
        searchAlign: 'left',
        pagination: true,
        columns: topicTableColumns
      })
      table.init($('#dataMoveTable'), {
        data: dataDataMoveTable,
        search: true,
        searchAlign: 'left',
        pagination: true,
        columns: dataMoveTableColumns
      })

      // 选项卡数据
      var queueAuditTabIndex = window.localStorage['queueAuditTabIndex']
      // console.log(parseInt(queueAuditTabIndex))
      switch (queueAuditTabIndex) {
        case '0':
        default:
          $('#tabBox').find('a').eq(0).tab('show')
          break
        case '1':
          $('#tabBox').find('a').eq(1).tab('show')
          break
        case '2':
          $('#tabBox').find('a').eq(2).tab('show')
          break
      }
      $('#tabBox').find('a').on('click', function (event) {
        var $target = $(event.target)
        var li = $target.parent('li')
        var index = li.index()
        window.localStorage['queueAuditTabIndex'] = index
      })





    })
  </script>
</head>
<body>
  
  <!-- 导航部分 start -->
  <nav id="left">
    <header>
      <img src="../images/mountain.jpg" alt="系统图标" class="systomLogo">
      <span>AntDesign</span>
    </header>
    <ul class="navList">
      <a href="#">
        <li class="active">
          <span class="glyphicon glyphicon-cog"></span>
          <span>应用</span>
        </li>
      </a>
      <a href="#">
      <li>
        <span class="glyphicon glyphicon-edit"></span>
        <span>测试发布</span>
      </li>
      </a>
      <li>
        <span class="glyphicon glyphicon-calendar"></span>
        <span>上线发布</span>
      </li>
      <li>
        <span class="glyphicon glyphicon-list-alt"></span>
        <span>工作台</span>
      </li>
      <li>
        <span class="glyphicon glyphicon-ok-sign"></span>
        <span>操作日志</span>
      </li>
      <li>
        <span class="glyphicon glyphicon-list-alt"></span>
        <span>问题反馈&使用帮助</span>
      </li>
    </ul>
  </nav>
  <!-- 导航部分 end -->
  <!-- 右边部分 start -->
  <div id="right">
    <!-- 头部 start -->
    <header class="header row">
      <!-- 这是bootstrap3的样式相符合的html end -->
      <div class="dropdownMenuBox col-sm-6">
        <div class="dropdown">
          <span class="oi oi-menu dropdown-toggle" title="菜单" aria-hidden="true" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"></span>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
            <li><a href="#">Action</a></li>
            <li><a href="#">Another action</a></li>
            <li><a href="#">Something else here</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="#">Separated link</a></li>
          </ul>
        </div>
      </div>
      <div class="operateBox col-sm-6">
        <span class="oi oi-magnifying-glass marginIcon" aria-hidden="true"></span>
        <span class="oi oi-list-rich marginIcon" aria-hidden="true"></span>
        <img src="../images/food.jpg" alt="头像" class="rounded-circle userPhoto">
        <span class="userName">momo.zxy</span>
      </div>
      <!-- 这是bootstrap3的样式相符合的html end -->
    </header>
    <!-- 头部 end -->
    <div class="container-fluid">
      <!-- 面包屑导航 start -->
      <header>
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="#">工作台</a></li>
            <li class="breadcrumb-item active" aria-current="page">队列审核</li>
          </ol>
        </nav>
      </header>
      <!-- 面包屑导航 end -->
      <!-- 每个页面的主要内容 state -->
      <!-- 选项卡面板 start -->
      <div class="panel">
        <!-- <div class="panel-heading">
        </div> -->
        <div class="panel-body">
          <ul class="nav nav-tabs" id="tabBox">
            <li class="">
              <a href="#vhostAudit" data-toggle="tab">Exchange</a>
            </li>
            <li>
              <a href="#topicAudit" data-toggle="tab">Queue</a>
            </li>
            <li>
              <a href="#dataMove" data-toggle="tab">数据转移</a>
            </li>
          </ul>
          <div class="tab-content">
            <div class="tab-pane active" id="vhostAudit">
              <!-- <p>exchange</p> -->
              <table id="vhostTable"></table>
            </div>
            <div class="tab-pane" id="topicAudit">
              <table id="topicTable"></table>
            </div>
            <div class="tab-pane" id="dataMove">
              <table id="dataMoveTable"></table>
            </div>
          </div>
        </div>
      </div>
      <!-- 选项卡面板 end -->
      <!-- 每个页面的主要内容 end -->
    </div>
  </div>
  <!-- 右边部分 end -->
</body>
</html>